{% set chartIdRandomized = 'highchart' ~ random() %}
<div class="text-center">
  <div id="{{ chartIdRandomized }}" width="950" height="400"></div>
</div>

<script>
  Highcharts.chart('{{ chartIdRandomized }}', {
    chart: {
      plotBackgroundColor: null,
      plotBorderWidth: null,
      plotShadow: false,
      type: 'pie'
    },
    title: {
      text: 'Browser market shares in January, 2018'
    },
    tooltip: {
      pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
    },
    plotOptions: {
      pie: {
        allowPointSelect: true,
        cursor: 'pointer',
        dataLabels: {
          enabled: false
        },
        showInLegend: true,
        animations: false,
      }
    },
    series: [{
      name: 'Brands',
      colorByPoint: true,
      data: [{
        name: 'Chrome',
        y: 61.41,
        sliced: true,
        selected: true
      }, {
        name: 'Internet Explorer',
        y: 11.84
      }, {
        name: 'Firefox',
        y: 10.85
      }, {
        name: 'Edge',
        y: 4.67
      }, {
        name: 'Safari',
        y: 4.18
      }, {
        name: 'Other',
        y: 7.05
      }]
    }]
  });
</script>

{#<script>#}
{#(function() {#}
{#  var colors = [#}
{#    '#FE9029',#}
{#    '#FFDE2F',#}
{#    '#74766C',#}
{#    '#62C5D3',#}
{#    '#A7CB11',#}
{#    '#006F55',#}
{#    '#009E50',#}
{#    '#CAE070',#}
{#    '#FFEB82',#}
{#    '#99D8B9',#}
{#    '#FEA654',#}
{#    '#A1DCE5',#}
{#    '#74766C',#}
{#    '#CCECDC',#}
{#    '#A1DCE5'#}
{#  ];#}

{#  var injectedData = {{ pie_chart_data | json_encode | raw }};#}

{#  function prepareData(data, colors) {#}
{#    var iteration = 0;#}
{#    var mutatedData = [];#}

{#    for (var item of data) {#}
{#      mutatedData.push({#}
{#        label: item.label,#}
{#        value: item.value,#}
{#        color: colors[iteration],#}
{#        highlight: colors[iteration]#}
{#      });#}

{#      // Reset if index does not exist.#}
{#      if (typeof colors[iteration] === 'undefined') {#}
{#        iteration = 0;#}
{#      }#}
{#      else {#}
{#        iteration++;#}
{#      }#}
{#    }#}

{#    return mutatedData;#}
{#  }#}

{#  var ctx = document.querySelector('#{{ chartIdRandomized }} canvas').getContext('2d');#}
{#  var options = {#}
{#    datasetStrokeWidth: 3,#}
{#    pointDotRadius : 2,#}
{#    scaleGridLineColor: 'rgb(0, 0, 0)',#}
{#    scaleShowVerticalLines: false,#}
{#    animation: false,#}
{#    responsive: false,#}
{#    maintainAspectRatio: false,#}
{#    datasetFill: false,#}
{#    bezierCurve : true,#}
{#    bezierCurveTension : 0.2#}
{#  };#}
{#  var data = prepareData(injectedData, colors);#}

{#  var piechart = new Chart(ctx).Pie(data, options);#}
{#  {% if (show_legend) %}#}
{#  document.querySelector('#{{ chartIdRandomized }} figcaption').innerHTML = piechart.generateLegend();#}
{#  {% endif %}#}
{#}())#}
{#</script>#}
